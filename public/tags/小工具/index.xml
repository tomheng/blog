<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>小工具 on 趣味互联网</title>
    <link>http://:1313/tmp/tags/%E5%B0%8F%E5%B7%A5%E5%85%B7/</link>
    <description>Recent content in 小工具 on 趣味互联网</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 21 Aug 2014 05:33:53 +0000</lastBuildDate>
    <atom:link href="http://:1313/tmp/tags/%E5%B0%8F%E5%B7%A5%E5%85%B7/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>proc_open使用一例</title>
      <link>http://:1313/tmp/2014/08/proc_open%E4%BD%BF%E7%94%A8%E4%B8%80%E4%BE%8B/</link>
      <pubDate>Thu, 21 Aug 2014 05:33:53 +0000</pubDate>
      
      <guid>http://:1313/tmp/2014/08/proc_open%E4%BD%BF%E7%94%A8%E4%B8%80%E4%BE%8B/</guid>
      <description>&lt;p&gt;平时工作中很少用到&lt;a href=&#34;http://cn2.php.net/proc_open&#34;&gt;proc_open&lt;/a&gt;这个函数，最近用这个函数做了一个数据库管理小程序。&lt;/p&gt;

&lt;p&gt;实现如下：&lt;/p&gt;

&lt;div class=&#34;codecolorer-container php blackboard&#34; style=&#34;overflow:auto;white-space:nowrap;&#34;&gt;
  &lt;table cellspacing=&#34;0&#34; cellpadding=&#34;0&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;line-numbers&#34;&gt;
        &lt;div&gt;
          1&lt;br /&gt;2&lt;br /&gt;3&lt;br /&gt;4&lt;br /&gt;5&lt;br /&gt;6&lt;br /&gt;7&lt;br /&gt;8&lt;br /&gt;9&lt;br /&gt;10&lt;br /&gt;11&lt;br /&gt;12&lt;br /&gt;13&lt;br /&gt;14&lt;br /&gt;15&lt;br /&gt;16&lt;br /&gt;17&lt;br /&gt;18&lt;br /&gt;19&lt;br /&gt;20&lt;br /&gt;21&lt;br /&gt;22&lt;br /&gt;
        &lt;/div&gt;
      &lt;/td&gt;
      
      &lt;td&gt;
        &lt;div class=&#34;php codecolorer&#34;&gt;
          &lt;span class=&#34;co1&#34;&gt;//file name db.php&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re0&#34;&gt;$mysql_list&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/array&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;st_h&#34;&gt;&#39;test&#39;&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; &lt;span class=&#34;st_h&#34;&gt;&#39;mysql -hlocalhost -utest -p123456 -P3306 test&#39;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;st_h&#34;&gt;&#39;test2&#39;&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; &lt;span class=&#34;st_h&#34;&gt;&#39;mysql -h172.16.190.199 -utest2 -p654321 -P3306 test2&#39;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re0&#34;&gt;$desc&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/array&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;nu0&#34;&gt;&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; STDIN&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;nu0&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; STDOUT&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;nu0&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; STDERR&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re0&#34;&gt;$flag&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$argv&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#91;&lt;/span&gt;&lt;span class=&#34;nu0&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#93;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re0&#34;&gt;$env&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$_ENV&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re0&#34;&gt;$cwd&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/getcwd&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;getcwd&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;a href=&#34;http://www.php.net/isset&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;isset&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$mysql_list&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#91;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$flag&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#93;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;a href=&#34;http://www.php.net/exit&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;exit&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;st0&#34;&gt;&#34;can not found the &lt;span class=&#34;es4&#34;&gt;$flag&lt;/span&gt;&#34;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/proc_open&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;proc_open&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$cmd&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$desc&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$pipes&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$cwd&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$env&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;a href=&#34;http://www.php.net/exit&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;exit&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;st_h&#34;&gt;&#39;failed to execute cmd&#39;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;
        &lt;/div&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;这样有很多数据库需要管理的时候就比较容易了，直接配置下连接参数，然后：&lt;/p&gt;

&lt;p&gt;php db.php test&lt;/p&gt;

&lt;p&gt;简单实用吧~&lt;/p&gt;

&lt;p&gt;补一个bash实现的。&lt;/p&gt;

&lt;div class=&#34;codecolorer-container bash blackboard&#34; style=&#34;overflow:auto;white-space:nowrap;&#34;&gt;
  &lt;table cellspacing=&#34;0&#34; cellpadding=&#34;0&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;line-numbers&#34;&gt;
        &lt;div&gt;
          1&lt;br /&gt;2&lt;br /&gt;3&lt;br /&gt;4&lt;br /&gt;5&lt;br /&gt;6&lt;br /&gt;7&lt;br /&gt;8&lt;br /&gt;9&lt;br /&gt;10&lt;br /&gt;11&lt;br /&gt;12&lt;br /&gt;13&lt;br /&gt;
        &lt;/div&gt;
      &lt;/td&gt;
      
      &lt;td&gt;
        &lt;div class=&#34;bash codecolorer&#34;&gt;
          &lt;span class=&#34;co0&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;re2&#34;&gt;flag&lt;/span&gt;=&lt;span class=&#34;re4&#34;&gt;$1&lt;/span&gt;;&lt;br /&gt; &lt;span class=&#34;kw1&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;re1&#34;&gt;$flag&lt;/span&gt; &lt;span class=&#34;kw1&#34;&gt;in&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &lt;span class=&#34;st_h&#34;&gt;&#39;test&#39;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;mysql &lt;span class=&#34;re5&#34;&gt;-hlocalhost&lt;/span&gt; &lt;span class=&#34;re5&#34;&gt;-utest&lt;/span&gt; &lt;span class=&#34;re5&#34;&gt;-p123456&lt;/span&gt; &lt;span class=&#34;re5&#34;&gt;-P3306&lt;/span&gt; &lt;span class=&#34;kw3&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;sy0&#34;&gt;;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &lt;span class=&#34;st_h&#34;&gt;&#39;test2&#39;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;mysql -h172.16.190.199 &lt;span class=&#34;re5&#34;&gt;-utest2&lt;/span&gt; &lt;span class=&#34;re5&#34;&gt;-p654321&lt;/span&gt; &lt;span class=&#34;re5&#34;&gt;-P3306&lt;/span&gt; test2&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;sy0&#34;&gt;;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp;&lt;span class=&#34;sy0&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw3&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;st_h&#34;&gt;&#39;can not found the flag cmd&#39;&lt;/span&gt;;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;sy0&#34;&gt;;;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;kw1&#34;&gt;esac&lt;/span&gt;;
        &lt;/div&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>