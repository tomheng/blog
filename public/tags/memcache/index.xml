<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Memcache on 趣味互联网</title>
    <link>http://:1313/tmp/tags/memcache/</link>
    <description>Recent content in Memcache on 趣味互联网</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 26 Mar 2014 14:29:38 +0000</lastBuildDate>
    <atom:link href="http://:1313/tmp/tags/memcache/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>「转」Memcache 和 Memcached 客户端的区别</title>
      <link>http://:1313/tmp/2014/03/%E8%BD%ACmemcache-%E5%92%8C-memcached-%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Wed, 26 Mar 2014 14:29:38 +0000</pubDate>
      
      <guid>http://:1313/tmp/2014/03/%E8%BD%ACmemcache-%E5%92%8C-memcached-%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E5%8C%BA%E5%88%AB/</guid>
      <description>

&lt;h1 id=&#34;php-client-comparison:855023d82846c71410e37c2505920f82&#34;&gt;PHP Client Comparison&lt;/h1&gt;

&lt;p&gt;There are primarily two clients used with PHP. One is the older, more widespread &lt;a href=&#34;http://pecl.php.net/package/memcache&#34; rel=&#34;nofollow&#34;&gt;pecl/memcache&lt;/a&gt; and the other is the newer, less used, more feature rich &lt;a href=&#34;http://pecl.php.net/package/memcached&#34; rel=&#34;nofollow&#34;&gt;pecl/memcached&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Both support the basics such as multiple servers, setting vaules, getting values, increment, decrement and getting stats.&lt;/p&gt;

&lt;p&gt;Here are some more advanced features and information.&lt;/p&gt;

&lt;table border=&#34;1&#34; cellpadding=&#34;5&#34;&gt;
  &lt;tr&gt;
    &lt;th&gt;
    &lt;/th&gt;
    
    &lt;th&gt;
      &lt;a href=&#34;http://pecl.php.net/package/memcache&#34; rel=&#34;nofollow&#34;&gt;pecl/memcache&lt;/a&gt;
    &lt;/th&gt;
    
    &lt;th&gt;
      &lt;a href=&#34;http://pecl.php.net/package/memcached&#34; rel=&#34;nofollow&#34;&gt;pecl/memcached&lt;/a&gt;
    &lt;/th&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      First Release Date
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      2004-06-08
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      2009-01-29 (beta)
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Actively Developed?
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      External Dependency
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      None
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      &lt;a href=&#34;http://tangent.org/552/libmemcached.html&#34; rel=&#34;nofollow&#34;&gt;libmemcached&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;td colspan=&#34;3&#34; align=&#34;center&#34;&gt;
      &lt;strong&gt;Features&lt;/strong&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Automatic Key Fixup&lt;sup&gt;1&lt;/sup&gt;
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      No
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Append/Prepend
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      No
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Automatic Serialzation&lt;sup&gt;2&lt;/sup&gt;
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Binary Protocol
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      No
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Optional
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      CAS
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      No
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Compression
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Communication Timeout
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Connect Only
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Various Options
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Consistent Hashing
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Delayed Get
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      No
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Multi-Get
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Session Support
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Set/Get to a specific server
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      No
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;
    &lt;th align=&#34;left&#34;&gt;
      Stores Numerics
    &lt;/th&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Converted to Strings
    &lt;/td&gt;
    
    &lt;td align=&#34;center&#34;&gt;
      Yes
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;ol&gt;
&lt;li&gt;pecl/memcache will convert an invalid key into a valid key for you. pecl/memcached will return false when trying to set/get a key that is not valid.&lt;/li&gt;
&lt;li&gt;You do not have to serialize your objects or arrays before sending them to the set commands. Both clients will do this for you.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&amp;#8212;end&amp;#8211;&lt;/p&gt;

&lt;p&gt;原文链接：&lt;a href=&#34;https://code.google.com/p/memcached/wiki/PHPClientComparison&#34;&gt;https://code.google.com/p/memcached/wiki/PHPClientComparison&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span style=&#34;color: #ff0000;&#34;&gt;PS：Memcache会将数字转成字符串存储这个坑刚踩到过～&lt;/span&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>用Memcache实现分布式的锁服务</title>
      <link>http://:1313/tmp/2013/08/%E7%94%A8memcache%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E7%9A%84%E9%94%81%E6%9C%8D%E5%8A%A1/</link>
      <pubDate>Sun, 04 Aug 2013 09:03:24 +0000</pubDate>
      
      <guid>http://:1313/tmp/2013/08/%E7%94%A8memcache%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E7%9A%84%E9%94%81%E6%9C%8D%E5%8A%A1/</guid>
      <description>&lt;p&gt;一般情况下我们都用Memcache作为一个分布式的key/value缓存服务器，其实Memcache也可以实一些外门邪道的功能比如作为分布式锁来用。&lt;/p&gt;

&lt;p&gt;原理其实非常简单就是memecach_add的时候，如果添加的key已经存在那么后面的添加就会失败。设想在高并发的场景下，如果存在被竞争的资源，我们就可以利用这个小trick来对资源加锁。知道了原理实现起来非常简单，下面是我初步实现的代码。&lt;/p&gt;

&lt;div class=&#34;codecolorer-container php blackboard&#34; style=&#34;overflow:auto;white-space:nowrap;&#34;&gt;
  &lt;table cellspacing=&#34;0&#34; cellpadding=&#34;0&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;line-numbers&#34;&gt;
        &lt;div&gt;
          1&lt;br /&gt;2&lt;br /&gt;3&lt;br /&gt;4&lt;br /&gt;5&lt;br /&gt;6&lt;br /&gt;7&lt;br /&gt;8&lt;br /&gt;9&lt;br /&gt;10&lt;br /&gt;11&lt;br /&gt;12&lt;br /&gt;13&lt;br /&gt;14&lt;br /&gt;15&lt;br /&gt;16&lt;br /&gt;17&lt;br /&gt;18&lt;br /&gt;19&lt;br /&gt;20&lt;br /&gt;21&lt;br /&gt;22&lt;br /&gt;23&lt;br /&gt;24&lt;br /&gt;25&lt;br /&gt;26&lt;br /&gt;27&lt;br /&gt;28&lt;br /&gt;29&lt;br /&gt;30&lt;br /&gt;31&lt;br /&gt;32&lt;br /&gt;33&lt;br /&gt;34&lt;br /&gt;35&lt;br /&gt;36&lt;br /&gt;37&lt;br /&gt;38&lt;br /&gt;39&lt;br /&gt;40&lt;br /&gt;41&lt;br /&gt;42&lt;br /&gt;43&lt;br /&gt;44&lt;br /&gt;45&lt;br /&gt;46&lt;br /&gt;47&lt;br /&gt;48&lt;br /&gt;49&lt;br /&gt;50&lt;br /&gt;51&lt;br /&gt;52&lt;br /&gt;53&lt;br /&gt;54&lt;br /&gt;55&lt;br /&gt;56&lt;br /&gt;57&lt;br /&gt;58&lt;br /&gt;59&lt;br /&gt;60&lt;br /&gt;61&lt;br /&gt;62&lt;br /&gt;63&lt;br /&gt;64&lt;br /&gt;65&lt;br /&gt;66&lt;br /&gt;67&lt;br /&gt;68&lt;br /&gt;69&lt;br /&gt;70&lt;br /&gt;71&lt;br /&gt;72&lt;br /&gt;73&lt;br /&gt;74&lt;br /&gt;75&lt;br /&gt;76&lt;br /&gt;77&lt;br /&gt;78&lt;br /&gt;79&lt;br /&gt;80&lt;br /&gt;81&lt;br /&gt;82&lt;br /&gt;83&lt;br /&gt;84&lt;br /&gt;85&lt;br /&gt;86&lt;br /&gt;87&lt;br /&gt;88&lt;br /&gt;89&lt;br /&gt;90&lt;br /&gt;91&lt;br /&gt;92&lt;br /&gt;93&lt;br /&gt;94&lt;br /&gt;95&lt;br /&gt;96&lt;br /&gt;97&lt;br /&gt;98&lt;br /&gt;99&lt;br /&gt;100&lt;br /&gt;101&lt;br /&gt;102&lt;br /&gt;103&lt;br /&gt;104&lt;br /&gt;105&lt;br /&gt;106&lt;br /&gt;
        &lt;/div&gt;
      &lt;/td&gt;
      
      &lt;td&gt;
        &lt;div class=&#34;php codecolorer&#34;&gt;
          &lt;span class=&#34;kw2&#34;&gt;&lt;?php&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp;* 锁服务(用Memcache模拟锁)&lt;br /&gt; &amp;nbsp;* Author: tomheng&lt;zhm20070928@gmail.com&gt;&lt;br /&gt; &amp;nbsp;* gist: https://gist.github.com/tomheng/6149779&lt;br /&gt; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &lt;span class=&#34;kw2&#34;&gt;class&lt;/span&gt; Lock&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$mc&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$key_prefix&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;st0&#34;&gt;&#34;memcache_lock_service_key_&#34;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$all_lock_names&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/array&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$expiration&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nu0&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;co1&#34;&gt;//one min&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$max_block_time&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nu0&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;co1&#34;&gt;//最长的阻塞时间&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* [__construct description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kw2&#34;&gt;function&lt;/span&gt; __construct&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;a href=&#34;http://www.php.net/function_exists&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;function_exists&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;st_h&#34;&gt;&#39;memcache_init&#39;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/memcache_connect&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;memcache_connect&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;st_h&#34;&gt;&#39;memcache_host&#39;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nu0&#34;&gt;11211&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* [get_key description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* @param &amp;nbsp;[type] $name [description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* @return [type] &amp;nbsp; &amp;nbsp; &amp;nbsp; [description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kw2&#34;&gt;function&lt;/span&gt; get_key&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;key_prefix&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* 捕获锁&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* @param &amp;nbsp;[type] $name [description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* @return [type] &amp;nbsp; &amp;nbsp; &amp;nbsp; [description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;public&lt;/span&gt; &amp;nbsp;&lt;span class=&#34;kw2&#34;&gt;function&lt;/span&gt; begin&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$block&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$max_block_time&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;max_block_time&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;get_key&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/memcache_add&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;memcache_add&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nu0&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;expiration&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;all_lock_names&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#91;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#93;&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nu0&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co1&#34;&gt;//$this-&gt;debug();&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;kw1&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co1&#34;&gt;//dolog(&#39;Lock failed &#39;.$name);&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co1&#34;&gt;//echo &#39;#&#39;.PHP_EOL;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co1&#34;&gt;//sleep(1);&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;kw1&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$block&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;&amp;&amp;&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$max_block_time&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;--&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;&amp;&amp;&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;a href=&#34;http://www.php.net/sleep&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;sleep&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;nu0&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* 释放锁&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kw2&#34;&gt;function&lt;/span&gt; release&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;get_key&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/memcache_delete&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;memcache_delete&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;a href=&#34;http://www.php.net/unset&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;unset&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;all_lock_names&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#91;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#93;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$re&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* 释放所有的锁&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kw2&#34;&gt;function&lt;/span&gt; __destruct&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kw4&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;all_lock_names&lt;/span&gt; &lt;span class=&#34;kw1&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$value&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co2&#34;&gt;# code...&lt;br /&gt; &lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;co4&#34;&gt;/**&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* 调试&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;* @return [type] [description]&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp;*/&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw2&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kw2&#34;&gt;function&lt;/span&gt; debug&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;a href=&#34;http://www.php.net/var_dump&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;var_dump&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;all_lock_names&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;all_lock_names&lt;/span&gt; &lt;span class=&#34;kw1&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&gt;&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$value&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;get_key&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$name&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$value&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;a href=&#34;http://www.php.net/memcache_get&#34;&gt;&lt;span class=&#34;kw3&#34;&gt;memcache_get&lt;/span&gt;&lt;/a&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#40;&lt;/span&gt;&lt;span class=&#34;re0&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;me1&#34;&gt;mc&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;re0&#34;&gt;$key&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#41;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;kw1&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;br0&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;re0&#34;&gt;$value&lt;/span&gt; &lt;span class=&#34;sy0&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;st0&#34;&gt;&#34;no such lock &#34;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;kw1&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;st0&#34;&gt;&#34;Lock name:&lt;span class=&#34;es4&#34;&gt;$key&lt;/span&gt;, value:&lt;span class=&#34;es4&#34;&gt;{$value}&lt;/span&gt;&#34;&lt;/span&gt;&lt;span class=&#34;sy0&#34;&gt;.&lt;/span&gt;PHP_EOL&lt;span class=&#34;sy0&#34;&gt;;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &amp;nbsp; &amp;nbsp; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br /&gt; &lt;span class=&#34;br0&#34;&gt;&amp;#125;&lt;/span&gt;
        &lt;/div&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>